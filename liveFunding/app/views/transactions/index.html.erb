<%= link_to I18n.t('transactions.new.title'), new_transaction_path %> &nbsp;&nbsp;
<%= link_to I18n.t('transactions.top.title'), top_transactions_path %> &nbsp;&nbsp;
<%= link_to I18n.t('transactions.fundtop.title'), fundtop_transactions_path %> &nbsp;&nbsp;
<%= link_to I18n.t('transactions.exportcsv.title'), { :controller => :transactions, :action => "export_csv" } %> 

<%
	#For sort order control
	sort_order = params[:sort_order]=="0" ? "1" : "0"
	arrow_str = sort_order=="0" ? "▲" : "▼"
%>

<% form_for :transaction, @transaction, :url=>{:controller=>"transactions", :action=>"import_csv"}, :html => { :multipart => true } do |f| %> 
<%= I18n.t('transactions.importcsv.title') %>  : <%= f.file_field :file %> <%= 

submit_tag 'Submit' %> <% end %> <br />

<h3><%= I18n.t('transactions.index.title') %></h3>
<table border="0" cellspacing="15">
<tr>
	<th><%= link_to I18n.t('transactions.index.from')+(params[:sort_by]=="from" ? arrow_str : ""), { :controller => :transactions, :action => "index", :sort_by => "from", :sort_order => sort_order}, :title => "sort by from" %></th>
	<th><%= link_to I18n.t('transactions.index.amount')+(params[:sort_by]=="amount" ? arrow_str : ""), { :controller => :transactions, :action => "index", :sort_by => "amount", :sort_order => sort_order}, :title => "sort by amount" %></th>
	<th><%= link_to I18n.t('transactions.index.to')+(params[:sort_by]=="to" ? arrow_str : ""), { :controller => :transactions, :action => "index", :sort_by => "to", :sort_order => sort_order}, :title => "sort by to" %></th>
	<th><%= link_to I18n.t('transactions.index.create_time')+(params[:sort_by]=="create_time" ? arrow_str : ""), { :controller => :transactions, :action => "index", :sort_by => "create_time", :sort_order => sort_order}, :title => "sort by create time" %></th>
	<th colspan="5"> Operation </th>

</tr>
<% @transactions.each do |transaction| %>
<tr>
	<td onmouseover="this.style.background='yellow';this.style.cursor='pointer'"
        onmouseout="this.style.background='white';" onclick = "location='transactions/<%= transaction.id%>'">
        <%=h I18n.t('transactions.index.from') %>: <strong><% if transaction.donor !=nil%><%=h transaction.donor.name %><%end%></strong></td>
	<td onmouseover="this.style.background='yellow';this.style.cursor='pointer'"
        onmouseout="this.style.background='white';" onclick = "location='transactions/<%= transaction.id%>'">
        <strong><%=h transaction.amount %></strong>€ </td>
  <td onmouseover="this.style.background='yellow';this.style.cursor='pointer'"
        onmouseout="this.style.background='white';" onclick = "location='transactions/<%= transaction.id%>'">
        <strong><%if transaction.recipient !=nil %><%=h transaction.recipient.name %><%end%></strong></td>
	<td onmouseover="this.style.background='yellow';this.style.cursor='pointer'"
        onmouseout="this.style.background='white';" onclick = "location='transactions/<%= transaction.id%>'">
        <%=h transaction.created_at.strftime("%d.%m.%Y %H:%M")  %></td>
	<td>
	<% if logged_in? %>
		<%= link_to '+', { :controller => :transactions, :action => "incr_rank", :id => transaction.id }, :title => "Rank It!" %>
		<%= link_to '-', { :controller => :transactions, :action => "decr_rank", :id => transaction.id }, :title => "Unrank It!" %> <%=h transaction.rank %>
	<% end %>
	</td>
	<td><%= link_to '♥', { :controller => :transactions, :action => "incr_ilike", :id => transaction.id }, :title => "I Like It!"  %> <%= link_to 'X', { :controller => :transactions, :action => "decr_ilike", :id => transaction.id }, :title => "I don't Like It!"  %> <%=h transaction.ilike %></td>
	<td><%= link_to I18n.t('layout.navigation.show'), transaction %> </td>
	<td><%= link_to I18n.t('layout.navigation.edit'),  edit_transaction_path(transaction) %></td>
	<td><%= link_to I18n.t('layout.navigation.destroy'), transaction, :confirm => I18n.t('layout.navigation.sure'), :method => :delete %></td>
	<% if logged_in? %>
	<td><%= link_to I18n.t('layout.navigation.favourite'), {:controller => :favourite, :action => "favourite_transaction", :id => transaction.id } %></td>
	<td><%= link_to I18n.t('comments.new.title'), new_transaction_comment_path(transaction) %> </td>
	<% end %>
</tr>
<% end %>
</table>
<br />
